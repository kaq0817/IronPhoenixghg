<section class="product-feature-blocks page-width">
  {% for i in (1..3) %}
    {% assign photo_key = "photo" | append: i %}
    {% assign headline_key = "photo" | append: i | append: "_headline" %}
    {% assign desc_key = "photo" | append: i | append: "_desc" %}
    {% assign alt_key = "photo" | append: i | append: "_alt" %}

    {% if product.metafields.custom[photo_key] %}
      <div class="feature-block{% if i == 2 %} feature-block--reverse{% endif %}">
        <div class="feature-image">
          <img
            src="{{ product.metafields.custom[photo_key] | image_url: width: 1200, format: 'webp' }}"
            alt="{{ product.metafields.custom[alt_key] | default: product.title | escape }}"
            width="1200"
            height="auto"
            loading="lazy"
          >
        </div>
        <div class="feature-text">
          {% if product.metafields.custom[headline_key] %}
            <h2 class="feature-headline">{{ product.metafields.custom[headline_key] | escape }}</h2>
          {% endif %}
          {% if product.metafields.custom[desc_key] %}
            <div class="feature-desc rte">{{ product.metafields.custom[desc_key] }}</div>
          {% endif %}
        </div>
      </div>
    {% endif %}
  {% endfor %}
</section>

{% schema %}
{
  "name": "Product Feature Blocks",
  "settings": [],
  "presets": [
    {
      "name": "Product Feature Blocks"
    }
  ]
}
{% endschema %}
